<!doctype html><html lang=ja><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="変化分岐例: KifuViewer"><title>変化分岐例: KifuViewer</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-F2179JXDYY"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-F2179JXDYY")</script><link rel=icon type=image/png href=/kifu-viewer/favicon/favicon.png><link rel=icon type=image/svg+xml href=/kifu-viewer/favicon/favicon.svg><link rel=apple-touch-icon sizes=180x180 href=/kifu-viewer/favicon/apple-touch-icon.png><link rel=manifest href=/kifu-viewer/favicon/site.webmanifest><link class=drop-inline-css href=https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css rel=stylesheet crossorigin=anonymous><link class=inline-css href=/kifu-viewer/material-icons.css rel=stylesheet><style>.kifu-viewer-buttons>.btn{width:58px;overflow:hidden}html[data-bs-theme=dark] .navbar-brand>img{filter:invert(1)hue-rotate(180deg)}html[data-bs-theme=dark] #board{filter:invert(1)hue-rotate(180deg)}</style><header><nav class="navbar navbar-expand navbar-light"><div class="container flex-wrap"><a class=navbar-brand href=/kifu-viewer/><img alt src=/kifu-viewer/favicon/favicon.svg width=32 height=32>
KifuViewer</a><div class=navbar-nav><button title=ダークモード切替 id=toggleDarkMode class="fs-4 btn p-0">🌓</button></div></div></nav></header><main class="container pt-4"><noscript><div class="alert alert-warning">JavaScript を ON にしてください</div></noscript><div class=row><div class="col-sm text-center"><div tabindex=-1 class=notranslate><svg id="board" viewBox="0 0 400 540"/></div></div><div class=col-sm><h5>候補手</h5><ol id=branches class=notranslate></ol></div></div></main><footer class="pt-4 alert text-center"><div class=pt-3><a class=px-1 href=/>Home</a>
<a class=px-1 href=/terms/>Terms</a>
<a class=px-1 href=https://github.com/marmooo/kifu-viewer>Contact</a></div><div class=text-muted>&copy; <a href=https://github.com/marmooo>marmooo</a></div></footer><div class="drop-inline-css btn btn-lg btn-outline-secondary d-none"></div><script src=index.js></script><script src=kifu-viewer.js></script><script>function addBranch(e,t,n){const i=e.全指し手[t],o=i[n];var s=document.createElement("li");s.textContent=o.手番+o.手,s.onclick=function(){viewer.board.parentNode.focus(),viewer.data.変化=t,viewer.next()},branches.appendChild(s)}function showBranches(e,t){for(;t.firstChild;)t.removeChild(t.firstChild);const i=e.全指し手.変化手数,n=i.slice(viewer.data.変化).reverse(),s=e.手数+1,o=n.findIndex(e=>e==s);if(o>=0){const t=n.slice(o).findIndex(e=>e<s)-1;t>=0?n.slice(o,o+t).reverse().forEach(t=>{addBranch(e,n.length-t,s)}):(addBranch(e,0,s),addBranch(e,n.length-o,s))}}var viewer=new KifuViewer(document.getElementById("board"),{onMove:function(e){const t=e.全指し手.変化手数;if(viewer.data.変化!=0){const n=t[viewer.data.変化-1];if(n>e.手数){const s=t.slice(0,viewer.data.変化).reverse(),e=s.find(e=>e<n);viewer.data.変化=e||0}}showBranches(e,branches)}}),branches=document.getElementById("branches");viewer.load("kif/test-branch.kif","Shift_JIS",function(){showBranches(viewer.data,branches)})</script>